"use strict";var Z=(N,L,c)=>new Promise((l,R)=>{var f=_=>{try{h(c.next(_))}catch(x){R(x)}},d=_=>{try{h(c.throw(_))}catch(x){R(x)}},h=_=>_.done?l(_.value):Promise.resolve(_.value).then(f,d);h((c=c.apply(N,L)).next())});(self.webpackChunk=self.webpackChunk||[]).push([["node_modules_mermaid_dist_stateDiagram-v2-2671c3d1_js"],{"./node_modules/mermaid/dist/stateDiagram-v2-2671c3d1.js":function(N,L,c){c.d(L,{diagram:function(){return bt}});var l=c("./node_modules/mermaid/dist/styles-bbc3fe3b.js"),R=c("./node_modules/dagre-d3-es/src/graphlib/index.js"),f=c("./node_modules/d3/src/index.js"),d=c("./node_modules/mermaid/dist/mermaid-934d9bea.js"),h=c("./node_modules/mermaid/dist/index-67a42d7d.js"),_=c("./node_modules/dayjs/dayjs.min.js"),x=c("./node_modules/@braintree/sanitize-url/dist/index.js"),ft=c("./node_modules/dompurify/dist/purify.js"),ht=c("./node_modules/dagre-d3-es/src/dagre/index.js"),pt=c("./node_modules/dagre-d3-es/src/graphlib/json.js");const O="rect",$="rectWithTitle",F="start",q="end",tt="divider",et="roundedWithTitle",st="note",ot="noteGroup",T="statediagram",nt=`${T}-state`,m="transition",it="note",dt=`${m} note-edge`,ct=`${T}-${it}`,rt=`${T}-cluster`,lt=`${T}-cluster-alt`,w="parent",U="note",at="state",v="----",_t=`${v}${U}`,W=`${v}${w}`,k="fill:none",H="fill: #333",K="c",V="text",Y="normal";let M={},E=0;const Et=function(t){const n=Object.keys(t);for(const e of n)t[e]},St=function(t,n){return n.db.extract(n.db.getRootDocV2()),n.db.getClasses()};function ut(t){return t==null?"":t.classes?t.classes.join(" "):""}function G(t="",n=0,e="",i=v){const r=e!==null&&e.length>0?`${i}${e}`:"";return`${at}-${t}${r}-${n}`}const p=(t,n,e,i,r,a)=>{const s=e.id,y=ut(i[s]);if(s!=="root"){let b=O;e.start===!0&&(b=F),e.start===!1&&(b=q),e.type!==l.D&&(b=e.type),M[s]||(M[s]={id:s,shape:b,description:d.e.sanitizeText(s,(0,d.c)()),classes:`${y} ${nt}`});const o=M[s];e.description&&(Array.isArray(o.description)?(o.shape=$,o.description.push(e.description)):o.description.length>0?(o.shape=$,o.description===s?o.description=[e.description]:o.description=[o.description,e.description]):(o.shape=O,o.description=e.description),o.description=d.e.sanitizeTextOrArray(o.description,(0,d.c)())),o.description.length===1&&o.shape===$&&(o.shape=O),!o.type&&e.doc&&(d.l.info("Setting cluster for ",s,j(e)),o.type="group",o.dir=j(e),o.shape=e.type===l.a?tt:et,o.classes=o.classes+" "+rt+" "+(a?lt:""));const A={labelStyle:"",shape:o.shape,labelText:o.description,classes:o.classes,style:"",id:s,dir:o.dir,domId:G(s,E),type:o.type,padding:15};if(A.centerLabel=!0,e.note){const S={labelStyle:"",shape:st,labelText:e.note.text,classes:ct,style:"",id:s+_t+"-"+E,domId:G(s,E,U),type:o.type,padding:15},u={labelStyle:"",shape:ot,labelText:e.note.text,classes:o.classes,style:"",id:s+W,domId:G(s,E,w),type:"group",padding:0};E++;const g=s+W;t.setNode(g,u),t.setNode(S.id,S),t.setNode(s,A),t.setParent(s,g),t.setParent(S.id,g);let D=s,C=S.id;e.note.position==="left of"&&(D=S.id,C=s),t.setEdge(D,C,{arrowhead:"none",arrowType:"",style:k,labelStyle:"",classes:dt,arrowheadStyle:H,labelpos:K,labelType:V,thickness:Y})}else t.setNode(s,A)}n&&n.id!=="root"&&(d.l.trace("Setting node ",s," to be child of its parent ",n.id),t.setParent(s,n.id)),e.doc&&(d.l.trace("Adding nodes children "),Dt(t,e,e.doc,i,r,!a))},Dt=(t,n,e,i,r,a)=>{d.l.trace("items",e),e.forEach(s=>{switch(s.stmt){case l.b:p(t,n,s,i,r,a);break;case l.D:p(t,n,s,i,r,a);break;case l.S:{p(t,n,s.state1,i,r,a),p(t,n,s.state2,i,r,a);const y={id:"edge"+E,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:k,labelStyle:"",label:d.e.sanitizeText(s.description,(0,d.c)()),arrowheadStyle:H,labelpos:K,labelType:V,thickness:Y,classes:m};t.setEdge(s.state1.id,s.state2.id,y,E),E++}break}})},j=(t,n=l.c)=>{let e=n;if(t.doc)for(let i=0;i<t.doc.length;i++){const r=t.doc[i];r.stmt==="dir"&&(e=r.value)}return e},Tt={setConf:Et,getClasses:St,draw:function(t,n,e,i){return Z(this,null,function*(){d.l.info("Drawing state diagram (v2)",n),M={},i.db.getDirection();const{securityLevel:r,state:a}=(0,d.c)(),s=a.nodeSpacing||50,y=a.rankSpacing||50;d.l.info(i.db.getRootDocV2()),i.db.extract(i.db.getRootDocV2()),d.l.info(i.db.getRootDocV2());const b=i.db.getStates(),o=new R.k({multigraph:!0,compound:!0}).setGraph({rankdir:j(i.db.getRootDocV2()),nodesep:s,ranksep:y,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});p(o,void 0,i.db.getRootDocV2(),b,i.db,!0);let A;r==="sandbox"&&(A=(0,f.Ys)("#i"+n));const S=r==="sandbox"?(0,f.Ys)(A.nodes()[0].contentDocument.body):(0,f.Ys)("body"),u=S.select(`[id="${n}"]`),g=S.select("#"+n+" g");yield(0,h.r)(g,o,["barb"],T,n);const D=8;d.u.insertTitle(u,"statediagramTitleText",a.titleTopMargin,i.db.getDiagramTitle());const C=u.node().getBBox(),z=C.width+D*2,I=C.height+D*2;u.attr("class",T);const J=u.node().getBBox();(0,d.i)(u,I,z,a.useMaxWidth);const Q=`${J.x-D} ${J.y-D} ${z} ${I}`;d.l.debug(`viewBox ${Q}`),u.attr("viewBox",Q);const At=document.querySelectorAll('[id="'+n+'"] .edgeLabel .label');for(const B of At){const X=B.getBBox(),P=document.createElementNS("http://www.w3.org/2000/svg",O);P.setAttribute("rx",0),P.setAttribute("ry",0),P.setAttribute("width",X.width),P.setAttribute("height",X.height),B.insertBefore(P,B.firstChild)}})}},bt={parser:l.p,db:l.d,renderer:Tt,styles:l.s,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,l.d.clear()}}}}]);
